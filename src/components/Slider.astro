---
import { Image } from "astro:assets";
import slide1 from "../assets/slide1.png";
import slide2 from "../assets/slide2.avif";
import slide3 from "../assets/slide3.avif";
import slide4 from "../assets/slide4.avif";
import slide5 from "../assets/slide5.png";
import slide6 from "../assets/slide6.png";

const slides = [
    {
        image: slide1,
        title: "BIENVENIDOS A LA AMAZON√çA",
        buttonText: "Consultar Ahora",
        position: "object-center md:object-right",
    },
    {
        image: slide2,
        title: "ISLA DE LOS MONOS",
        buttonText: "Consultar Ahora",
        position: "object-center",
    },
    {
        image: slide3,
        title: "DESCUBRAMOS PACAYA SAMIRIA",
        buttonText: "Consultar Ahora",
        position: "object-[30%_50%]",
    },
    {
        image: slide4,
        title: "EXPLOREMOS LAS COMODIDADES NATIVAS",
        buttonText: "Consultar Ahora",
        position: "object-[40%_30%]",
    },
    {
        image: slide5,
        title: "HELICONIA AMAZON LODGE",
        buttonText: "Consultar Ahora",
        position: "object-[30%_50%]",
    },
    {
        image: slide6,
        title: "IRAPAY AMAZON LODGE",
        buttonText: "Consultar Ahora",
        position: "object-bottom",
    },
];
---

<div class="relative w-full h-screen overflow-hidden">
    <div
        id="slider"
        class="flex transition-transform duration-700 ease-in-out w-full h-full"
    >
        {
            slides.map((slide, index) => (
                <div
                    class="w-full h-full flex-shrink-0 relative aspect-[16/9]"
                    data-slide={index}
                >
                    <Image
                        src={slide.image}
                        alt={slide.title}
                        width={1920}
                        height={1080}
                        widths={[240, 540, 720, 1024, 1600, 1920]}
                        sizes="100vw"
                        class={`w-full h-full object-cover ${slide.position}`}
                        loading={index === 0 ? "eager" : "lazy"}
                    />
                    <div class="absolute inset-0 flex flex-col items-center justify-center text-white bg-black/40">
                        <h2 class="text-xl sm:text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold mb-4 text-center px-4 leading-snug sm:leading-tight md:leading-normal max-w-[80%] sm:max-w-[60%] lg:max-w-[50%]">
                            {slide.title}
                        </h2>
                        <a
                            href="https://wa.link/no5uic"
                            class="btn-primary flex items-center gap-2"
                            target="_blank"
                        >
                            {slide.buttonText}
                            <i class="fa-brands fa-whatsapp" />
                        </a>
                    </div>
                </div>
            ))
        }
    </div>

    <button
        id="prev"
        class="absolute left-4 top-1/2 transform -translate-y-1/2 text-white p-3 cursor-pointer z-10"
        aria-label="Ir al slider anterior"
    >
        <i class="fa-solid fa-chevron-left fa-2xl"></i>
    </button>
    <button
        id="next"
        class="absolute right-4 top-1/2 transform -translate-y-1/2 text-white p-3 cursor-pointer z-10"
        aria-label="Ir al slider siguiente"
    >
        <i class="fa-solid fa-chevron-right fa-2xl"></i>
    </button>
</div>

<script is:inline>
    document.addEventListener("DOMContentLoaded", () => {
        const slider = document.getElementById("slider");
        const prev = document.getElementById("prev");
        const next = document.getElementById("next");

        if (!slider || !prev || !next) return;

        let index = 0;
        const slides = slider.children.length;

        function updateSlider() {
            slider.style.transform = `translateX(-${index * 100}%)`;
        }

        function nextSlide() {
            index = (index + 1) % slides;
            updateSlider();
        }

        function prevSlide() {
            index = (index - 1 + slides) % slides;
            updateSlider();
        }

        next.addEventListener("click", nextSlide);
        prev.addEventListener("click", prevSlide);

        // Auto-play
        const interval = setInterval(nextSlide, 5000); // 5 seconds

        // Optional: Pause on hover?
        // slider.parentElement.addEventListener('mouseenter', () => clearInterval(interval));
    });
</script>
